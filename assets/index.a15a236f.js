var C=Object.defineProperty;var B=(a,t,e)=>t in a?C(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var l=(a,t,e)=>(B(a,typeof t!="symbol"?t+"":t,e),e);import{P as w}from"./vendor.6c0cdefa.js";const S=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function e(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=e(n);fetch(n.href,o)}};S();class g{constructor(t,e){l(this,"analyzer");l(this,"data");l(this,"sketch",t=>{t.setup=()=>{t.createCanvas(t.windowWidth,t.windowHeight),t.noStroke()},t.draw=()=>{t.background(100,230,200),this.analyzer.getByteTimeDomainData(this.data),[...Array(this.data.length).keys()].forEach(e=>{const i=this.data[e]/128;t.fill("#ffff00"),t.textSize(i*32),t.textAlign(t.CENTER,t.CENTER),t.text("Sound Visualization",t.width*.5,t.height*.5)})},t.windowResized=()=>{t.resizeCanvas(t.windowWidth,t.windowHeight)}});this.analyzer=t,this.data=e}}const v=a=>{const t=document.createElement("div");t.className="startWindow";const e=document.createElement("h1");e.textContent="Sound Visualization";const i=document.createElement("p");i.textContent="\u30B5\u30A6\u30F3\u30C9\u30D3\u30B8\u30E5\u30A2\u30E9\u30A4\u30BC\u30FC\u30B7\u30E7\u30F3\u3067\u3059\u3002";const n=document.createElement("p");n.textContent="Audio Controller\u306EPlay\u3067\u518D\u751F Stop\u3067\u505C\u6B62\u3057\u307E\u3059\u3002";const o=document.createElement("button");return o.textContent="Start!!",o.className="startButton",a.appendChild(t),t.appendChild(e),t.appendChild(i),t.appendChild(n),t.appendChild(o),{startWindow:t,startButton:o}},L=a=>{const t=document.createElement("div");t.className="audioController";const e=document.createElement("h3");e.textContent="Audio Controller";const i=document.createElement("button");i.textContent="Play",i.className="audioPlayButton";const n=document.createElement("button");n.textContent="Stop",n.className="audioStopButton";const o=document.createElement("button");o.textContent="+",o.className="audioGainPlusButton";const r=document.createElement("button");r.textContent="-",r.className="audioGainMinusButton",a.appendChild(t),t.appendChild(e),t.appendChild(i),t.appendChild(n),t.appendChild(o),t.appendChild(r)};var b="./assets/beat.1ed1a389.wav";const m=document.body,y=v(m),k=(a,t)=>{const e=new g(a,t);new w(e.sketch)};y.startButton.addEventListener("click",()=>{L(m),m.removeChild(y.startWindow);let a=!1,t,e;const i=async r=>{const s=await(await fetch(b)).arrayBuffer();return await r.decodeAudioData(s)},n=(r,c,s)=>{t=r.createBufferSource(),t.buffer=c,t.connect(e).connect(s).connect(r.destination),t.start(),a=!0};(()=>{const r=document.querySelector(".audioPlayButton");if(!(r instanceof HTMLButtonElement))throw new Error("Error");r.addEventListener("click",async()=>{const u=new AudioContext,d=u.createAnalyser();d.fftSize=2048;const E=d.frequencyBinCount,h=new Uint8Array(E);if(d.getByteTimeDomainData(h),e=u.createGain(),a===!0)return;const p=await i(u);n(u,p,d),k(d,h)});const c=document.querySelector(".audioStopButton");if(!(c instanceof HTMLButtonElement))throw new Error("Error");c.addEventListener("click",async()=>{const u=document.querySelector("main");if(!(u instanceof HTMLElement))throw new Error("Error");m.removeChild(u),t.stop(),a=!1});const s=document.querySelector(".audioGainPlusButton");if(!(s instanceof HTMLButtonElement))throw new Error("Error");s.addEventListener("click",()=>{e.gain.value<1&&(e.gain.value+=.05)});const f=document.querySelector(".audioGainMinusButton");if(!(f instanceof HTMLButtonElement))throw new Error("Error");f.addEventListener("click",()=>{e.gain.value>.05&&(e.gain.value-=.05)})})()});
